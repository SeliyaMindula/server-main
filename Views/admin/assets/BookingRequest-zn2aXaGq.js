import{r as n,a as N,j as e,L as p,c as v}from"./index-eyw8BnPF.js";import{P as E}from"./Pagination-uVTDb-MR.js";const D=()=>{const u=["VENUE NAME","Created At","Cont. Name","Cont. Email","Status",""],[s,h]=n.useState(10),[r,i]=n.useState(1),[l,x]=n.useState([]);n.useState(""),N();const d=c=>{const t=parseInt(c.target.value,10);h(t),i(1)};n.useEffect(()=>{(async()=>{try{const k=(await v.get("/users/booking-table")).data.sort((g,b)=>{const _=new Date(g.create_at||g.update_at).getTime();return new Date(b.create_at||b.update_at).getTime()-_});x(k)}catch(t){console.log(t)}})()},[]);const o=r*s,m=o-s,a=l.slice(m,o)||[],j=Math.ceil(l.length/s),f=[...Array(j+1).keys()].slice(1);return e.jsxs("div",{className:"view-user-container",children:[e.jsxs("div",{className:"page-title-box d-flex justify-content-between",children:[e.jsx("h4",{className:"page-title",children:"Booking Requests"}),e.jsx("nav",{"aria-label":"breadcrumb",children:e.jsxs("ol",{className:"breadcrumb",children:[e.jsx("li",{className:"breadcrumb-item",children:e.jsx(p,{to:"/",className:"b-link",children:"Home"})}),e.jsx("li",{className:"breadcrumb-item",children:e.jsx(p,{to:"#",className:"b-link",children:"Booking"})}),e.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Requests"})]})})]}),e.jsxs("div",{className:"content",children:[e.jsx("form",{action:"",className:"row",children:e.jsx("div",{className:"col-6",children:e.jsxs("div",{className:"d-flex align-items-baseline",children:[e.jsx("label",{htmlFor:"",className:"col-4",children:"Show Entries:"}),e.jsxs("select",{name:"",id:"",className:"form-select en-numbers",onChange:d,style:{width:"150px"},children:[e.jsx("option",{value:"10",children:"10"}),e.jsx("option",{value:"25",children:"25"}),e.jsx("option",{value:"50",children:"50"}),e.jsx("option",{value:"100",children:"100"})]})]})})}),e.jsxs("div",{className:"col mt-4",children:[a.length!==0&&e.jsxs("table",{className:"table table-hover",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"#"}),u.map((c,t)=>e.jsx("th",{children:c},t))]})}),e.jsx("tbody",{children:a.length!==0&&a.map((c,t)=>e.jsx(P,{index:t,item:c},t))})]}),a.length===0&&e.jsx("h3",{className:"text-center",children:"No data available ..."})]}),e.jsx(E,{nPage:j,pageNumbers:f,currentPage:r,setCurrentPage:i,totalEntries:l.length,itemsPerPage:s})]})]})},P=({index:u,item:s})=>{var d,o;const h=N(),[r,i]=n.useState();n.useEffect(()=>{(async()=>{try{const a=await v.get(`/venues/${s.venue_id}`);i(a.data)}catch(a){console.log(a)}})()},[]);const l=(d=JSON.parse(s==null?void 0:s.contact_person))==null?void 0:d.name,x=(o=JSON.parse(s==null?void 0:s.contact_person))==null?void 0:o.email;return r?e.jsxs("tr",{children:[e.jsx("td",{children:s.booking_id}),e.jsx("td",{children:r.basic.name}),e.jsx("td",{children:s.create_at.split("T")[0]}),e.jsx("td",{children:l}),e.jsx("td",{children:x}),e.jsx("td",{children:s.status}),e.jsxs("td",{children:[e.jsx("button",{className:"btn btn-primary btn-sm",onClick:()=>h(`/bmichadmin/booking/${s.booking_id}`),children:"MORE"})," "]})]}):e.jsx("p",{children:"loading..."})};export{D as default};
