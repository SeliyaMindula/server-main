import{r as u,j as e,u as S,a as y,L as _,c as g}from"./index-algzo-nC.js";const w=({data:c})=>{const{booking_id:r,name_of_organization_individual:l,refund_drawn:d,contact_person:n,event_type:a,setup:m,meal_plan:o,public_performance_approval:t,chief_guest:h,number_of_guests:s,VAT_registration_no:x,vat_copy:b,venue_id:f,create_at:N,update_at:v,status:C}=c,[i]=u.useState({booking_id:r,name_of_organization_individual:l,refund_drawn:JSON.parse(d),contact_person:JSON.parse(n),event_type:JSON.parse(a),setup:JSON.parse(m),meal_plan:JSON.parse(o),public_performance_approval:t,chief_guest:h,number_of_guests:JSON.parse(s),VAT_registration_no:x,vat_copy:b,venue_id:f,create_at:N,update_at:v}),p={account_no:i.refund_drawn.account_number,account_name:i.refund_drawn.account_name,bank_name:i.refund_drawn.bank_name,bank_code:i.refund_drawn.bank_code,branch_name:i.refund_drawn.bank_name,branch_code:i.refund_drawn.branch_code,swift_code:i.refund_drawn.swift_code},j={name:i.contact_person.name,address:i.contact_person.address,email:i.contact_person.email,mobile:i.contact_person.mobile_no,telephone:i.contact_person.telephone_no};return e.jsxs("div",{className:"",children:[e.jsxs("div",{className:"card m-2 p-3",children:[e.jsx("h3",{style:{fontSize:"1.5rem"},children:"Contact Details"}),e.jsxs("div",{className:"row p-3",children:[e.jsxs("div",{className:"col-md-6",children:[e.jsxs("p",{style:{fontSize:"1.2rem"},children:[e.jsx("strong",{children:"Name:"})," ",j.name]}),e.jsxs("p",{style:{fontSize:"1.2rem"},children:[e.jsx("strong",{children:"Address:"})," ",j.address]}),e.jsxs("p",{style:{fontSize:"1.2rem"},children:[e.jsx("strong",{children:"Telephone:"})," ",j.telephone?j.telephone:"-"]})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsxs("p",{style:{fontSize:"1.2rem"},children:[e.jsx("strong",{children:"Email:"})," ",j.email]}),e.jsxs("p",{style:{fontSize:"1.2rem"},children:[e.jsx("strong",{children:"Mobile:"})," ",j.mobile?j.mobile:"-"]})]})]})]}),e.jsxs("div",{className:"card m-2 p-3",children:[e.jsx("h3",{style:{fontSize:"1.5rem"},children:"Bank Details"}),e.jsxs("div",{className:"row p-3",children:[e.jsxs("div",{className:"col-md-6",children:[e.jsxs("p",{style:{fontSize:"1.2rem"},children:[e.jsx("strong",{children:"Account No:"})," ",p.account_no]}),e.jsxs("p",{style:{fontSize:"1.2rem"},children:[e.jsx("strong",{children:"Account Name:"})," ",p.account_name]}),e.jsxs("p",{style:{fontSize:"1.2rem"},children:[e.jsx("strong",{children:"Bank Name:"})," ",p.bank_name]}),e.jsxs("p",{style:{fontSize:"1.2rem"},children:[e.jsx("strong",{children:"Swift Code:"})," ",p.swift_code?p.swift_code:"-"]})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsxs("p",{style:{fontSize:"1.2rem"},children:[e.jsx("strong",{children:"Bank Code:"})," ",p.bank_code]}),e.jsxs("p",{style:{fontSize:"1.2rem"},children:[e.jsx("strong",{children:"Branch Name:"})," ",p.branch_name]}),e.jsxs("p",{style:{fontSize:"1.2rem"},children:[e.jsx("strong",{children:"Branch Code:"})," ",p.branch_code]})]})]})]})]})},k=({addon:c})=>{const{quantity:r,cost:l}=c,n=(r*parseFloat(l)).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2});return e.jsx("div",{className:"addons",children:e.jsxs("div",{className:"title-section",children:[e.jsxs("p",{children:[c.add_ons_name,parseInt(r)>1&&e.jsxs("span",{children:["x",r]})]}),e.jsxs("p",{className:"price",children:["LKR ",n]})]})})},D=c=>{const{cost:r,option_title:l,addons:d}=c.option,n=JSON.parse(d),a=r.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2});return e.jsxs("div",{className:"option",children:[e.jsxs("div",{className:"option_title",children:[e.jsx("h6",{children:l}),e.jsxs("p",{children:["LKR ",a]})]}),n==null?void 0:n.map((m,o)=>e.jsx(k,{addon:m},o))]})},z=c=>{const{pricing:r,setPopup:l}=c,[d,n]=u.useState(),a=r,m=o=>{let t=0;return JSON.parse(o.addons).forEach(s=>{t=t+parseFloat(s.cost)*s.quantity}),t};return u.useEffect(()=>{console.log(a),(()=>{let t=0;a==null||a.forEach(h=>{var s;(s=h.options)==null||s.forEach(x=>{t=t+m(x)})}),n(t)})()},[]),e.jsx("div",{id:"PricingMoreDetails",children:e.jsxs("div",{className:"card",children:[a==null?void 0:a.map((o,t)=>{var h;return e.jsxs("div",{children:[e.jsx("h5",{className:"date",children:new Date(o.date).toLocaleDateString("en-IN",{day:"numeric",month:"long",year:"numeric"})}),(h=o.options)==null?void 0:h.map((s,x)=>e.jsx(D,{option:s},x))]},t)}),e.jsx("hr",{}),e.jsxs("div",{className:"d-flex justify-content-between px-2",children:[e.jsx("strong",{children:"Total"}),e.jsxs("strong",{children:["LKR"," ",d==null?void 0:d.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]})})},L=()=>{var t;const{id:c}=S(),r=y(),[l,d]=u.useState(),[n,a]=u.useState(),[m,o]=u.useState();return u.useEffect(()=>{(async()=>{try{const s=await g.get(`/users/booking-request/${c}`);d(s.data),o(s.data.pricing),console.log(s.data);const x=await g.get(`/venues/${s.data.formData.venue_id}`);a(x.data),console.log(x.data)}catch(s){console.log(s)}})()},[]),!l&&!n?e.jsx("div",{children:"Loading..."}):(console.log("booking",l),console.log("pricing",m),e.jsxs("div",{children:[e.jsx("div",{className:"page-title-box d-flex justify-content-between",children:e.jsx("nav",{"aria-label":"breadcrumb",children:e.jsxs("ol",{className:"breadcrumb",children:[e.jsx("li",{className:"breadcrumb-item",children:e.jsx(_,{to:"/",className:"b-link",children:"Home"})}),e.jsx("li",{className:"breadcrumb-item",children:e.jsx(_,{to:"#",className:"b-link",children:"Booking"})}),e.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Request"})]})})}),e.jsx("div",{className:"row",children:e.jsxs("div",{className:"d-flex justify-content-between",children:[e.jsx("div",{children:e.jsx("h4",{children:(t=n==null?void 0:n.basic)==null?void 0:t.name})}),e.jsxs("div",{children:[e.jsx("button",{className:"btn btn-secondary btn-sm mx-1 px-2",children:"Edit"}),e.jsx("button",{className:"btn btn-danger btn-sm mx-1 px-2",children:"Cancel"}),e.jsx("button",{onClick:()=>r(`/bmichadmin/invoice/${c}`),className:"btn btn-success btn-sm mx-1 px-2",children:"Raise Invoice"})]})]})}),e.jsxs("div",{className:"row mt-2",children:[e.jsx("h2",{children:"Application Details"}),e.jsx("div",{className:"",children:e.jsx(w,{data:l.formData})})]}),e.jsx("br",{}),e.jsx("br",{}),e.jsxs("div",{className:"row",children:[e.jsx("h2",{children:"Reservation Details"}),e.jsx("div",{className:"",children:m&&e.jsx(z,{pricing:m,setPopup:()=>null})})]})]}))};export{L as default};
