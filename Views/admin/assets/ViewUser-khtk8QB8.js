import{u as L,r as a,A as _,j as e,L as V,c as i,d as x}from"./index-1ZIe4Z95.js";/* empty css             */import{T as d}from"./TextInput-Buusu_Su.js";import{S as P}from"./react-select.esm-ydH9zQ6E.js";import{C as n}from"./CheckBoxInput-xDj076wt.js";import"./defineProperty-QXht6sKD.js";import"./typeof-Q9eVcF_1.js";import"./emotion-react.browser.esm--QwjLHsi.js";import"./hoist-non-react-statics.cjs-ruMgn741.js";const Z=()=>{const{id:b}=L(),r=+b,[B,R]=a.useState([]),{currentUser:m}=a.useContext(_);m==null||m.id;const[t,F]=a.useState(null),[j,f]=a.useState(""),[v,N]=a.useState(""),[g,C]=a.useState(""),[w,S]=a.useState({value:"",label:""}),[y,E]=a.useState({value:"",label:""}),[U,k]=a.useState(""),[I,J]=a.useState(null);a.useState(""),a.useState(""),a.useState("");const[o,O]=a.useState([]),[u,T]=a.useState([]),[p,A]=a.useState([]),[h,$]=a.useState([]);a.useEffect(()=>{(async()=>{try{const l=await i.get("/departments/"),c=await i.get("/job-roles/");T(l.data),O(c.data)}catch(l){console.log(l)}})()},[]),a.useEffect(()=>{o.length>0&&A(o.map(s=>({label:s.role,value:s.role}))),u.length>0&&$(u.map(s=>({label:s.name,value:s.name})))},[o,u]);const D=async s=>{try{return(await i.get(`/users/${s}`)).data}catch(l){console.log(l),x({error:l.response.data.error})}};a.useEffect(()=>{(async()=>{const l=await D(r);F(l[0]),console.log(l[0])})()},[]),a.useEffect(()=>{if(t){f(t==null?void 0:t.email),C(t==null?void 0:t.username),N(t==null?void 0:t.full_name),k(t==null?void 0:t.contact);const s=p.find(c=>(console.log(o),c.value===(t==null?void 0:t.role)));S(s);const l=h.find(c=>c.value===(t==null?void 0:t.department));E(l)}},[t,p,h]);const H=async()=>{try{const s=new FormData;s.append("email",j),s.append("username",g),s.append("full_name",v),s.append("contact",U),s.append("role",w.value),s.append("department",y.value),s.append("avatar",I);const l=await i.put(`/users/${b}`,s,{headers:{"Content-Type":"multipart/form-data"}});console.log(l.data),x(l.data)}catch(s){x({error:s.response.data.error})}};return a.useEffect(()=>{console.log("re-rendered")},[r]),a.useEffect(()=>{(async()=>{try{const l=await D(r);R(l)}catch(l){console.log(l)}})()},[r]),e.jsxs("div",{className:"view-user-container",children:[e.jsxs("div",{className:"page-title-box d-flex justify-content-between",children:[e.jsx("h4",{className:"page-title",children:"User Details"}),e.jsx("nav",{"aria-label":"breadcrumb",children:e.jsxs("ol",{className:"breadcrumb",children:[e.jsx("li",{className:"breadcrumb-item",children:e.jsx(V,{to:"bmichadmin//",className:"b-link",children:"Home"})}),e.jsx("li",{className:"breadcrumb-item",children:"User"}),e.jsx("li",{className:"breadcrumb-item",children:e.jsx(V,{to:"/bmichadmin/view-users",className:"b-link",children:"View Users"})}),e.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"View User"})]})})]}),e.jsx("div",{className:"col",children:e.jsx("div",{className:"content col",children:e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-6",children:[e.jsx("h3",{children:"Edit User Details"}),e.jsx("div",{className:"col mt-4",children:e.jsx(d,{label:"Email:",type:"email",parentClasses:"d-flex align-items-baseline",labelClass:"col-3 fw-bold",inputClass:"col",value:j,onChange:s=>f(s.target.value)})}),e.jsx("div",{className:"col mt-4",children:e.jsx(d,{label:"Username:",type:"text",parentClasses:"d-flex align-items-baseline",labelClass:"col-3 fw-bold",inputClass:"col",value:g,onChange:s=>C(s.target.value)})}),e.jsx("div",{className:"col mt-4",children:e.jsx(d,{label:"Full Name:",type:"Text",parentClasses:"d-flex align-items-baseline",labelClass:"col-3 fw-bold",inputClass:"col",value:v,onChange:s=>N(s.target.value)})}),e.jsx("div",{className:"col mt-4",children:e.jsx(d,{label:"Contact:",type:"text",parentClasses:"d-flex align-items-baseline",labelClass:"col-3 fw-bold",inputClass:"col",value:U,onChange:s=>k(s.target.value)})}),e.jsx("div",{className:"col mt-4",children:e.jsxs("div",{className:"d-flex align-items-baseline",children:[e.jsx("label",{htmlFor:"role",className:"col-3 fw-bold",children:"Job Role:"}),e.jsx(P,{className:"col p-0",isSearchable:!0,options:p,value:w,onChange:s=>S(s)})]})}),e.jsx("div",{className:"col mt-4",children:e.jsxs("div",{className:"d-flex align-items-baseline",children:[e.jsx("label",{htmlFor:"role",className:"col-3 fw-bold",children:"Department:"}),e.jsx(P,{className:"col p-0",isSearchable:!0,options:h,value:y,onChange:s=>E(s)})]})}),e.jsx("div",{className:"row mt-3 ",children:e.jsx("button",{className:"btn btn-primary col-3 btn-m",onClick:H,children:"Update"})})]}),e.jsxs("div",{className:"col-6",children:[e.jsx("h3",{children:"User Permission"}),e.jsxs("div",{className:"d-flex justify-content-between",children:[e.jsxs("div",{className:"col mt-3",children:[e.jsx("h5",{children:"User Permissions"}),e.jsx(n,{label:"Invite user",checked:!0}),e.jsx(n,{label:"View users",checked:!0}),e.jsx(n,{label:"Change user status",checked:!0})]}),e.jsxs("div",{className:"col mt-3",children:[e.jsx("h5",{children:"Venue Permissions"}),e.jsx(n,{label:"Add Venue",checked:!0}),e.jsx(n,{label:"Edit Venue",checked:!0}),e.jsx(n,{label:"View Venue",checked:!0})]})]})]})]})})})]})};export{Z as default};
